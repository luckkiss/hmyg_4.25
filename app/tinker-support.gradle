apply plugin: 'com.tencent.bugly.tinker-support'

def bakPath = file("${buildDir}/bakApk/")

/**
 * ?????��??��??????????????
 */
//def baseApkDir = "app-0907-18-09-41"  3.0.4fix1 ???
//def baseApkDir = "app-0926-12-54-35"   3.0.5. 1
//def baseApkDir = "app-1030-15-54-46"    // 3.0.5release

def baseApkDir = "app-0717-11-41-20"    //  7.17 基础包
//def baseApkDir = "app-0604-12-19-23"    //app-0326-17-24-27
//def baseApkDir = "app-1229-10-02-35"    //

//def baseApkDir = ""    // 3.0.5fix1
//def baseApkDir = "app-1107-15-32-11"   // ???��2.1.1 72
//
/**
 * ???????????????????????��?
 */
tinkerSupport {

    // ????tinker-support?????????true
    enable = true
    // tinkerEnable???????
    tinkerEnable = true

    // ????�r???????????module??????tinker
    autoBackupApkDir = "${bakPath}"

    // ??????????????????????��??apk?????????
    // ?????????????????��??????????
    // @{link tinkerPatch.oldApk }
    baseApk = "${bakPath}/${baseApkDir}/app-release.apk"

    // ???tinker???applyMapping
    baseApkProguardMapping = "${bakPath}/${baseApkDir}/app-release-mapping.txt"

    // ???tinker???applyResourceMapping
    baseApkResourceMapping = "${bakPath}/${baseApkDir}/app-release-R.txt"

    // ???????????????????????????tinkerId??????????��???

//        tinkerId = "base-2.1.0_test"
//      tinkerId = "patch-2.1.0_test"
//      tinkerId = "patch-3.0.5release"
//    tinkerId = "base-3.0.5release"
//      tinkerId = "patch-3.0.5release"

//        tinkerId = "base-3.0.6release_fix1"
//        tinkerId = "patch-3.0.6release_fix1"

    tinkerId = "base-4.0.4"   //7.17   修改正方形商城图片
//    tinkerId = "patch-4.0.4"  //

//    tinkerId = "base-4.0.3"   // 6.21  ��ҳ�İ�  �汾
//    tinkerId = "patch-4.0.3"  //

//    tinkerId = "base-4.0.2_1"   // ?���????  4.0.2??? ???  ????????
//    tinkerId = "patch-4.0.2_1"  //
//    tinkerId = "base-4.0.2"   // ?���????  4.0.2??? ???  ????????
//    tinkerId = "patch-4.0.2"  //

//    tinkerId = "base-4.0.1"   // ?���????  4.0??? ???  520 ?????? ???
//  tinkerId = "patch-4.0.1"  //
//    tinkerId = "base-4.0.0_release"   // ?���????  4.0??? ???  520 ?????? ???
//  tinkerId = "patch-4.0.0_release"  //
//    tinkerId = "base-3.0.6release_fix6"
//  tinkerId = "patch-3.0.6release_fix6"  // ?????? ?��   ???? ????  ??????

//    tinkerId = "base-3.0.6release_fix5"  ��??? ?��
//  tinkerId = "patch-3.0.6release_fix5"

//    tinkerId = "base-3.0.6release_fix4"
//  tinkerId = "patch-3.0.6release_fix4"

//        tinkerId = "base-3.0.6release_fix3"
//      tinkerId = "patch-3.0.6release_fix3"

//    tinkerId = "base-3.0.6release_fix2"
//      tinkerId = "patch-3.0.6release_fix2"

//      tinkerId = "patch-3.0.5release"

//    tinkerId = "base-3.0.5bete3"
//      tinkerId = "patch-3.0.5bete3"

//    tinkerId = "base-3.0.5bete2"
//      tinkerId = "patch-3.0.5bete2"

//        tinkerId = "base-3.0.5bete1"
//          tinkerId = "patch-3.0.5bete1"

//        tinkerId = "base-3.0.4.fix1"
//        tinkerId = "patch-3.0.4.fix1"

    // ??????????tinkerPatch???��????????false
    // ??????tinkerPatch???��???��???????????tinkerPatch
    overrideTinkerPatchConfiguration = true

    // ??????????????????
    // buildAllFlavorsDir = "${bakPath}/${baseApkDir}"

    // ??????��??????????false.(tinker-spport 1.0.7??????
    isProtectedApp = false

    // ?????????Application??
    enableProxyApplication = true

}

/**
 * ??????,????????????????????�ʦ�????
 * ????????????????????��?:
 * https://github.com/Tencent/tinker/wiki/Tinker-%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97
 */
tinkerPatch {

// tinkerEnable = true
    oldApk = "${bakPath}/${baseApkDir}/app-release.apk"
    ignoreWarning = false
    useSign = true
    dex {
        dexMode = "jar"
        pattern = ["classes.dex", "classes2.dex", "assets/secondary-dex-?.jar"]
        loader = ["com.hldj.hmyg.util.ConstantState"
                  //use sample, let BaseBuildInfo unchangeable with tinker
//                      "tinker.sample.android.app.BaseBuildInfo"
        ]
    }





    lib {
        pattern = ["lib/*/*.so"]
    }

    res {
        pattern = ["res/*", "r/*", "assets/*", "resources.arsc", "AndroidManifest.xml"]
        ignoreChange = []
        largeModSize = 100
    }

    packageConfig {
    }
    sevenZip {
        zipArtifact = "com.tencent.mm:SevenZip:1.1.10"
//        path = "/usr/local/bin/7za"
    }
    buildConfig {
        keepDexApply = false
        //tinkerId = "1.0.1-base"
        //applyMapping = "${bakPath}/${appName}/app-release-mapping.txt" //  ?????????mapping????????�g???apk??proguard???????
        //applyResourceMapping = "${bakPath}/${appName}/app-release-R.txt" // ?????????R.txt??????????apk???????ResId?????
    }
}

